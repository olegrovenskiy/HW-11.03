# HW-11.03

## Домашнее задание к занятию "11.03 Микросервисы: подходы"

## Задача 1: Обеспечить разработку

Решение должно соответствовать следующим требованиям:

    Облачная система;
    Система контроля версий Git;
    Репозиторий на каждый сервис;
    Запуск сборки по событию из системы контроля версий;
    Запуск сборки по кнопке с указанием параметров;
    Возможность привязать настройки к каждой сборке;
    Возможность создания шаблонов для различных конфигураций сборок;
    Возможность безопасного хранения секретных данных: пароли, ключи доступа;
    Несколько конфигураций для сборки из одного репозитория;
    Кастомные шаги при сборке;
    Собственные докер образы для сборки проектов;
    Возможность развернуть агентов сборки на собственных серверах;
    Возможность параллельного запуска нескольких сборок;
    Возможность параллельного запуска тестов;

Рассмотрев технические требования, и учитывая что это green field внедрение, я бы предложид GitLab, т.к.

        1. система удовлетворяет всем вышеперечисленным требованиям
        2. Может быть размещена в облачной инфраструктуре или может быть использована как облачный сервис 
        3. Состав:
           ● Own Issues
           ● Own Wiki
           ● Own Repository
           ● Own CI\CD
           ● Own Packages
           ● Oun ticket system
        4. Некоторые особенности системы CI/CD:
            ● пайплайн пишется на YAML-синтаксисе;
            ● пайплайн хранится в репозитории в файле .gitlab-ci.yml;
            ● есть возможность использовать AutoDevOps;
            ● есть отдельные возможности миграции с Jenkins и CircleCI;
            ● позволяет использовать ChatOps.
            ● использование разных типов ранеров и возможность паралельного запуска
        5. Весь требуемый набор компонентов в одной системе
        6. Удобный, дружественный интерфейс администрирования
        7. Свободное программное обеспечение с открытым исходным кодом, распространяемое по лицензии MIT 
        8. Безопасное хранение секретных данных: пароли, ключи доступа ( релиз 12.10 CI-процесс может авторизовываться в Hashicorp's Vault через JSON Web     Token (JWT), и для авторизации нет необходимости хранить токен для доступа к нужным policy в переменных окружения (или где-либо ещё).
        9. Сommunity of 3,000+ contributors
        
        
## Задача 2: Логи   

ешение должно соответствовать следующим требованиям:

        Сбор логов в центральное хранилище со всех хостов обслуживающих систему;
        Минимальные требования к приложениям, сбор логов из stdout;
        Гарантированная доставка логов до центрального хранилища;
        Обеспечение поиска и фильтрации по записям логов;
        Обеспечение пользовательского интерфейса с возможностью предоставления доступа разработчикам для поиска по записям логов;
        Возможность дать ссылку на сохраненный поиск по записям логов;

 Моё предложение использовать ELK - Elasticsearch-Logstash-Kibana, т.к.
 
        1. Он поддерживает вышеперечисленные требования
        2. Данный стэк позволяет “из коробки” получить средство агрегации и трансформации, хранения и визуализации данных логирования.
        3. Наиболее распространенное решения для построения системы сбора логов на основе ELK является архитектура “Hot-Warm”.
        
 Основными достоинствами ELK-стека считаются следующие [1]:

        - Масштабируемость – кластер Elasticsearch (ES) расширяется «на лету» добавлением новых серверов. При этом распределение нагрузки по узлам происходит автоматически.
        - Отказоустойчивость — в случае сбоя кластерных узлов данные не потеряются, а будут перераспределены, и поисковая система сама продолжит работу. Операционная стабильность достигается ведением логов на каждое изменение данных в хранилище сразу на нескольких узлах кластера.
        - Гибкость поисковых фильтров, включая нечеткий поиск, возможности работы с восточными языками (китайский, японский, корейский) и мультиарендность, когда в рамках одного объекта ES можно динамически организовать несколько различных поисковых систем. Благодаря наличию встроенных анализаторов текста Elasticsearch автоматически выполняет токенизацию, лемматизацию, стемминг и прочие преобразования текста для решения NLP-задач, связанных с поиском данных.
        - Управляемость ES по HTTP с помощью JSON-запросов за счет REST API и визуального веб-интерфейса Kibana.
        - Универсальность – Logsatsh в потоковом режиме работает одновременно со множеством разных источников данных (СУБД, файлы, системные логи, веб-приложения и пр.), фильтруя и преобразуя их для отправки в хранилище ES. А NoSQL-природа Elasticsearch (отсутствие схемы) позволяет загружать в него JSON-объекты, которые автоматически индексируются и добавляются в базу поиска. Это позволяет ускорить прототипирование поисковых Big Data решений.
       ( https://ru.bmstu.wiki/Elastic_Elasticsearch )

 
 
 ## Задача 3: Мониторинг
 
 Решение должно соответствовать следующим требованиям:

        Сбор метрик со всех хостов, обслуживающих систему;
        Сбор метрик состояния ресурсов хостов: CPU, RAM, HDD, Network;
        Сбор метрик потребляемых ресурсов для каждого сервиса: CPU, RAM, HDD, Network;
        Сбор метрик, специфичных для каждого сервиса;
        Пользовательский интерфейс с возможностью делать запросы и агрегировать информацию;
        Пользовательский интерфейс с возможность настраивать различные панели для отслеживания состояния системы;
 
 
